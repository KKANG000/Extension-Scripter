<!-- Sidebar Popup -->
<div id="scripter-sidebar-popup" class="hidden" data-scripter-theme="default">
    <!-- Resize handle removed -->
    <div class="scripter-header">
        <h3 style="font-size: calc(1em + 1px);">SCRIPT SUPERVISOR</h3>
        <div class="scripter-header-buttons">
            <button id="scripter-popout-btn" class="scripter-header-btn" title="Open in popup">‚á±</button>
            <button id="scripter-sidebar-close" class="scripter-header-btn" title="Close">‚úï</button>
        </div>
        
    </div>
    <div class="scripter-content">
        <!-- Status Controls -->
        <div class="scripter-status-controls">
            <div class="scripter-status-left">
                <button id="scripter-ready-btn" class="scripter-status-btn ready active">
                    <span class="indicator">‚óè</span> READY
                </button>
                <button id="scripter-action-btn" class="scripter-status-btn action">
                    <span class="indicator">‚óã</span> ACTION
                </button>
            </div>
            <div class="scripter-status-right">
                <button id="scripter-montage-btn" class="scripter-montage-btn" title="Montage Mode">‚è©</button>
            </div>
        </div>
        
        <!-- CUT Section -->
        <div class="scripter-cut-section">
            <button id="scripter-cut-btn" class="scripter-cut-btn">
                üé¨ CUT!
            </button>
            <label class="scripter-auto-action">
                <input type="checkbox" id="scripter-auto-action">
                Auto-proceed Action
            </label>
        </div>
        
        <!-- Caution Block -->
        <div class="scripter-block" data-block="caution">
            <div class="scripter-block-header collapsed">
                <span class="icon">‚ö†Ô∏è</span>
                <span class="title" style="font-size: calc(1em + 2px);"><b>Caution</b></span>
                <span class="toggle">‚ñº</span>
            </div>
            <div class="scripter-block-content collapsed">
                <textarea id="scripter-caution" placeholder="Enter cautions..."></textarea>
            </div>
        </div>
        
        <!-- Current Scene Block -->
        <div class="scripter-block" data-block="current">
            <div class="scripter-block-header">
                <span class="icon">üé¨</span>
                <span class="title" style="font-size: calc(1em + 2px);"><b>Current Scene (Main)</b></span>
                <span class="toggle">‚ñº</span>
            </div>
            <div class="scripter-block-content">
                <textarea id="scripter-current-scene" placeholder="Enter current scene..."></textarea>
                <div class="scripter-current-scene-footer">
                    <button id="scripter-rollback-btn" class="scripter-rollback-btn" title="Restore previous scene" disabled>‚Ü©</button>
                </div>
            </div>
        </div>
        
        <!-- Next Scene Block -->
        <div class="scripter-block" data-block="next">
            <div class="scripter-block-header">
                <span class="icon">‚≠ê</span>
                <span class="title" style="font-size: calc(1em + 2px);"><b>Next Scene (Teaser)</b></span>
                <span class="toggle">‚ñº</span>
            </div>
            <div class="scripter-block-content">
                <textarea id="scripter-next-scene" placeholder="Enter next scene..."></textarea>
                <div class="scripter-next-scene-footer">
                    <button id="scripter-upcoming-btn" class="scripter-upcoming-btn">Upcoming...</button>
                    <span class="scripter-queue-count">Queue: <span id="scripter-queue-count-num">0</span></span>
                </div>
            </div>
        </div>
        
        <!-- Core Principle Block -->
        <div class="scripter-block" data-block="core">
            <div class="scripter-block-header collapsed">
                <span class="icon">üìã</span>
                <span class="title" style="font-size: calc(1em + 2px);"><b>Core Principle</b></span>
                <span class="toggle">‚ñº</span>
            </div>
            <div class="scripter-block-content collapsed">
                <textarea id="scripter-core-principle" placeholder="Enter core principle..."></textarea>
            </div>
        </div>
    </div>
</div>

<!-- Center Popup -->
<div id="scripter-center-popup-overlay" class="hidden">
    <div id="scripter-center-popup" data-scripter-theme="default">
        <div class="scripter-header">
            <h3 style="font-size: calc(1em + 1px);">SCRIPT SUPERVISOR</h3>
            <div class="scripter-header-buttons">
                <button id="scripter-center-close" class="scripter-header-btn" title="Close">‚úï</button>
            </div>
        </div>
        <div class="scripter-popup-content">
            <!-- Column 1: Current Scene + Next Scene (Flex 4) -->
            <div class="scripter-popup-column scripter-popup-column-main" style="flex: 4; display: flex; flex-direction: column; gap: 5px;">
                <div class="scripter-block" data-block="current-popup" style="flex-grow: 1; display: flex; flex-direction: column; margin-bottom: 0;">
                    <div class="scripter-block-header scripter-no-collapse">
                        <span class="icon">üé¨</span>
                        <span class="title" style="font-size: calc(1em + 2px);"><b>Current Scene (Main)</b></span>
                        <button id="scripter-rollback-btn-popup" class="scripter-rollback-btn" title="Restore previous scene" disabled style="margin-left: auto;">‚Ü©</button>
                    </div>
                    <div class="scripter-block-content" style="flex-grow: 1; display: flex; flex-direction: column;">
                        <textarea id="scripter-current-scene-popup" placeholder="Enter current scene..." style="flex-grow: 1; height: 100%; width: 100%;"></textarea>
                    </div>
                </div>
                
                <div class="scripter-block" data-block="next-popup" style="flex-grow: 1; display: flex; flex-direction: column; margin-bottom: 0;">
                    <div class="scripter-block-header scripter-no-collapse">
                        <span class="icon">‚≠ê</span>
                        <span class="title" style="font-size: calc(1em + 2px);"><b>Next Scene (Teaser)</b></span>
                        <span class="scripter-queue-count" style="margin-left: auto;">Queue: <span id="scripter-queue-count-num-popup">0</span></span>
                    </div>
                    <div class="scripter-block-content" style="flex-grow: 1; display: flex; flex-direction: column;">
                        <textarea id="scripter-next-scene-popup" placeholder="Enter next scene..." style="flex-grow: 1; height: 100%; width: 100%;"></textarea>
                        <div class="scripter-next-scene-footer">
                            <button id="scripter-upcoming-btn-popup" class="scripter-upcoming-btn">Upcoming...</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Column 2: Caution + Core + Controls (Flex 3) -->
            <div class="scripter-popup-column scripter-popup-column-side" style="flex: 3; display: flex; flex-direction: column; gap: 5px;">
                <div class="scripter-block" data-block="caution-popup" style="flex-grow: 1; display: flex; flex-direction: column; margin-bottom: 0;">
                    <div class="scripter-block-header scripter-no-collapse">
                        <span class="icon">‚ö†Ô∏è</span>
                        <span class="title" style="font-size: calc(1em + 2px);"><b>Caution</b></span>
                    </div>
                    <div class="scripter-block-content" style="flex-grow: 1; display: flex; flex-direction: column;">
                        <textarea id="scripter-caution-popup" placeholder="Enter cautions..." style="flex-grow: 1; height: 100%; width: 100%;"></textarea>
                    </div>
                </div>
                
                <div class="scripter-block" data-block="core-popup" style="flex-grow: 1; display: flex; flex-direction: column; margin-bottom: 0;">
                    <div class="scripter-block-header scripter-no-collapse">
                        <span class="icon">üìã</span>
                        <span class="title" style="font-size: calc(1em + 2px);"><b>Core Principle</b></span>
                    </div>
                    <div class="scripter-block-content" style="flex-grow: 1; display: flex; flex-direction: column;">
                        <textarea id="scripter-core-principle-popup" placeholder="Enter core principle..." style="flex-grow: 1; height: 100%; width: 100%;"></textarea>
                    </div>
                </div>
                
                <div class="scripter-popup-controls" style="margin-top: auto; margin-bottom: 0; display: flex; flex-direction: column; gap: 5px;">
                    <label class="scripter-auto-action">
                        <input type="checkbox" id="scripter-auto-action-popup">
                        Auto-proceed Action
                    </label>
                    <div class="scripter-status-controls">
                        <div class="scripter-status-left">
                            <button id="scripter-ready-btn-popup" class="scripter-status-btn ready active">
                                <span class="indicator">‚óè</span> READY
                            </button>
                            <button id="scripter-action-btn-popup" class="scripter-status-btn action">
                                <span class="indicator">‚óã</span> ACTION
                            </button>
                        </div>
                        <div class="scripter-status-right">
                            <button id="scripter-montage-btn-popup" class="scripter-montage-btn" title="Montage Mode">‚è©</button>
                        </div>
                    </div>
                    <button id="scripter-cut-btn-popup" class="scripter-cut-btn">
                        üé¨ CUT!
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Queue Management Popup -->
<div id="scripter-queue-popup-overlay" class="hidden">
    <div id="scripter-queue-popup" data-scripter-theme="default">
        <div class="scripter-header">
            <h3>Scene Queue</h3>
            <div class="scripter-header-buttons">
                <button id="scripter-queue-close" class="scripter-header-btn" title="Close">‚úï</button>
            </div>
        </div>
        <div class="scripter-queue-content">
            <div id="scripter-queue-list">
                <!-- Queue items will be dynamically added here -->
            </div>
            <button id="scripter-queue-add" class="scripter-queue-add-btn">+ Add Scene</button>
        </div>
        <div class="scripter-queue-footer">
            <div class="scripter-queue-footer-left">
                <button id="scripter-queue-import" class="scripter-queue-footer-btn">Import</button>
                <button id="scripter-queue-export" class="scripter-queue-footer-btn">Export</button>
            </div>
            <button id="scripter-queue-clear" class="scripter-queue-footer-btn danger">Clear All</button>
        </div>
    </div>
</div>
